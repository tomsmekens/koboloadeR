<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Metapackage for Survey Data Crunching • koboloadeR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Metapackage for Survey Data Crunching">
<meta property="og:description" content="An organized workflow generating Rmd files from an extended xlsform questionnaire structure to facilitate survey data crunching.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-142392388-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-142392388-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">koboloadeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Crunching.html">Data Crunching</a>
    </li>
    <li>
      <a href="articles/How-to.html">Steps to build fully reproducible analysis</a>
    </li>
    <li>
      <a href="articles/Getting_data.html">Getting data from server</a>
    </li>
    <li>
      <a href="articles/Troubleshooting.html">Common Troubleshooting</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/unhcr/koboloadeR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="koboloader-survey-data-crunching-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#koboloader-survey-data-crunching-" class="anchor"></a>koboloadeR: Survey Data Crunching <img src="reference/figures/koboloadeR.png" width="200" align="right">
</h1></div>
<!-- badges: start -->






<!-- badges: end -->
<p>koboloadeR is a metapackage, that brings together a series of specialised packages in an organised data analysis workflow, to conduct data discovery and analysis for data collected through <a href="https://www.kobotoolbox.org/">KoboToolbox</a>, <a href="https://opendatakit.org/">ODK</a>, <a href="https://ona.io/home/">ONA</a> or any <strong><a href="http://xlsform.org">xlsform</a></strong> compliant data collection platform.</p>
<p>This package first builds on the capacity of <a href="http://kobo.unhcr.org">UNHCR Kobo server</a> but it can also be used from any structured dataset. It comes as a companion tool to the <a href="https://unhcr.github.io/Integrated-framework-household-survey">Integrated Framework for Household Survey</a>.</p>
<p>koboloadeR aims at helping <a href="https://humanitarian-user-group.github.io/">humanitarian data analysts</a> to focus in data interpretation by saving the time needed to quickly generate the graphs and charts required to discover insights from a dataset. It also ensure analysis <strong>reproducibility</strong> through a separation of the analysis configuration and the analysis process. The package allows to account for sample weights and hierachical dataset structure (both capacities that are not available through the default <a href="http://support.kobotoolbox.org/articles/2847676-viewing-and-creating-custom-reports">reporting engine</a> or the <a href="http://support.kobotoolbox.org/articles/592387-using-the-excel-analyzer">excel-analyzer</a>).</p>
<div id="approach" class="section level2">
<h2 class="hasAnchor">
<a href="#approach" class="anchor"></a>Approach</h2>
<p>The main concept behind the package is to implement a survey data analysis plan and configuration directly within the same <a href="http://xlsform.org">xlsform</a> excel file that has been used to develop the questionnaire. A few additional column are created in this excel document, the package read those column to generate a series of predefined report.</p>
<p><img src="https://raw.githubusercontent.com/unhcr/koboloadeR/gh-pages/inst/script/workflow.png" alt="alt text"></p>
<p>The approach offered through the package has the following advantages:</p>
<ul>
<li><p>End users <strong>do not need to code</strong> in R and to master the language in order to use the package as the configuration is done in excel;</p></li>
<li><p>The data <strong>analysis plan</strong> is de facto fully documented and described;</p></li>
<li><p>The resulting data crunching reports are fully <strong>reproducible</strong>;</p></li>
<li><p>Analysis <strong>iterations</strong> are facilitated;</p></li>
<li><p>Good <strong>practices</strong> are enforced through the package.</p></li>
</ul>
<p>A more detailed introduction to the concepts used in the package is presented in the <a href="articles/Crunching.html">Data Crunching article</a>.</p>
<p>The data crunching allows to generated quickly initial reports through a series of semi-automated processes:</p>
<ol>
<li><p>Have all the configuration used to generate the reports (details of tabulation and crosstabulation plans, weighting approach) documented within the xlsform allow to track easily all changes to the data and to facilitate ( <a href="%22reference/kobo_dico.html%22">koboloadeR::kobo_dico</a>)</p></li>
<li><p>Have a clear and consistent folder structure and naming conventions for all the files coming in and out of the crunching workflow ( <a href="%22reference/kobo_projectinit.html%22">koboloadeR::kobo_projectinit</a>)</p></li>
<li><p>Ensures that files containing questions and respondents have been all considered: form &amp; data to be checked to each other ( <a href="%22reference/kobo_analysis_plan.html%22">koboloadeR::kobo_check_analysis_plan</a>)</p></li>
<li><p>Make question and choices labels readable within charts by adjusting them where needed (for instance question labels to be less than 80 char and choices labels less than 40), resolve typos if any… ( <a href="%22reference/kobo_label.html%22">koboloadeR::kobo_label</a> and <a href="%22reference/kobo_encode.html%22">koboloadeR::kobo_encode</a></p></li>
<li><p>Merge household data with individual-level data – when using repeat components. There’s a file of data at the household-level and another file containing data on the individuals that constitute those households. There should be unique identifying codes that match households and individuals ( <a href="%22reference/kobo_load_data.html%22">koboloadeR::kobo_load_data</a></p></li>
<li><p>Review and potentially re-categorize open-ended answers when “or other” option was offered ( <a href="%22reference/kobo_clean.html%22">koboloadeR::kobo_clean</a> )</p></li>
<li><p>Measure statistical disclosure risk in order to remove sensitive data and indirect identifiers <a href="%22reference/kobo_anonymise.html%22">koboloadeR::kobo_anonymise</a> and <a href="%22reference/kobo_anonymisation_report.html%22">koboloadeR::kobo_anonymisation_report</a> )</p></li>
<li><p>Create new variables out of existing variables (also called feature engineering). For instance Group distinct answers into categories or ranges, Split up or extract components from an answer, aggregate variable collected at individual level to the household level ( <a href="%22reference/kobo_indicator.html%22">koboloadeR::kobo_indicator</a> )</p></li>
<li><p>Generate easy to read visualization for all tabulations, cross-tabulations and correlation ( <a href="%22reference/kobo_luster_report.html%22">koboloadeR::kobo_cluster_report</a> )</p></li>
<li><p>Identify population segments, i.e. statistical clusters, based on similar characteristics ( <a href="%22reference/kobo_crunching_report.html%22">koboloadeR::kobo_crunching_report</a>)</p></li>
</ol>
<p>You can have a look at <a href="https://github.com/unhcr/koboloadeR/tree/gh-pages/out">some examples of output reports here</a>.</p>
</div>
<div id="environment-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#environment-setup" class="anchor"></a>Environment setup</h2>
<div id="software-installation" class="section level3">
<h3 class="hasAnchor">
<a href="#software-installation" class="anchor"></a>Software installation</h3>
<ol>
<li><p><a href="https://cran.r-project.org/">Install R</a>: follow instruction from the installer.</p></li>
<li><p><strong>Only for windows user</strong> <a href="https://cran.r-project.org/bin/windows/Rtools">Install RTools</a>: This executable is needed to install the package from github. Follow instruction from the installer.</p></li>
<li><p><a href="https://www.rstudio.com/products/rstudio/download/#download">Install R Studio</a> : follow instruction from the installer</p></li>
</ol>
<p>You can now Launch <strong>R Studio</strong> . You may check the list of common issues in the <a href="articles/Troubleshooting.html">Common Troubleshooting</a> article.</p>
</div>
</div>
<div id="package-installation-from-github" class="section level2">
<h2 class="hasAnchor">
<a href="#package-installation-from-github" class="anchor"></a>Package installation from Github</h2>
<p>Note that the package is still in beta-version. We hope to have soon a release available on CRAN.</p>
<ul>
<li>Open R studio interface and within the R console, install <code>devtools</code> package:</li>
</ul>
<pre class="{r}"><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("remotes")</a></code></pre>
<ul>
<li>Install koboloadeR:</li>
</ul>
<pre class="{r}"><code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github("unhcr/koboloadeR", Ncpus=4) 

## Use UNHCR graphical template- https://unhcr-web.github.io/unhcRstyle/docs/
remotes::install_github('unhcr-web/unhcRstyle')</a></code></pre>
<ul>
<li>You are all set! You can know use koboloadeR. If you have a problem consult the common troubleshooting part at the end of this page.</li>
</ul>
<div id="quick-project-walk-through" class="section level3">
<h3 class="hasAnchor">
<a href="#quick-project-walk-through" class="anchor"></a>Quick Project Walk Through</h3>
<p>You can consult the vignettes for a detailed guidance</p>
<div id="create-project" class="section level5">
<h5 class="hasAnchor">
<a href="#create-project" class="anchor"></a>Create project</h5>
<ul>
<li><p>In R Studio, select File, click New project. A box opens</p></li>
<li><p>Choose New Directory</p></li>
<li><p>Choose Empty project</p></li>
<li><p>Type the name of the folder where you want to put your data</p></li>
<li><p>Select where you want to put this folder</p></li>
<li><p>Click Create project</p></li>
</ul>
<p>Then setup a few things: run those two lines:</p>
<pre class="{r}"><code><a href="https://unhcr.github.io/koboloadeR/docs/">library (koboloadeR) # This loads koboloadeR package

kobo_projectinit() # Creates folders necessary and transfer files needed</a></code></pre>
<p>It might take a while as a few other packages have to be installed or loaded. Once the see the " &gt;" again at the beginning of the line, you are ready to start</p>
</div>
<div id="console-mode" class="section level4">
<h4 class="hasAnchor">
<a href="#console-mode" class="anchor"></a>Console mode</h4>
<p>The <strong>console mode</strong> is recommended - You can run the file <code>run-analysis.R</code> that is automatically copied in the <code>code</code> folder after you run the <code><a href="reference/kobo_projectinit.html">kobo_projectinit()</a></code> function .</p>
<p>This will be likely the quickest options, once your are used to the package.</p>
<p>Note however that this implies that you configure correctly on your own the full configuration within the xlform file.</p>
</div>
<div id="not-maintained---support-would-be-wellcome---graphical-user-interface-gui" class="section level4">
<h4 class="hasAnchor">
<a href="#not-maintained---support-would-be-wellcome---graphical-user-interface-gui" class="anchor"></a>NOT MAINTAINED - Support would be wellcome - Graphical user interface (GUI)</h4>
<p>A shinyApp to guide user through all those steps has been prototyped - unfortunately - it’s not maintained with the last dev and might be buggy…</p>
<p>All instructions and options for the project configuration and analysis plan settings shall be do-able through a dedicated GUI.</p>
<pre class="{r}"><code><a href="reference/kobo_shiny.html">kobo_shiny("app_main_koboloadeR.R")</a></code></pre>
<p>For better performances, select “Open in Browser” on the top of the window.</p>
</div>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Contributions to the packages are welcome. Please read first the <a href="CONTRIBUTING.html">contribution guidelines</a>, follow the <a href="CODE_OF_CONDUCT.html">code of conduct</a> and use the <a href="ISSUE_TEMPLATE.html">issue template</a>.</p>
<p>To go in more details, the suggested work-flow is presented below (note that all of it is not yet fully implemented - see <a href="https://github.com/unhcr/koboloadeR/issues">issue tracking for more details</a>). You can read the <a href="reference/index.html">function documentations</a> directly.</p>
<p><img src="https://raw.githubusercontent.com/unhcr/koboloadeR/gh-pages/inst/script/workflow2.png" alt="alt text"></p>
<blockquote>
<p>This package is part of <code>unhcrverse</code>, a set of packages to ease the production of statistical evidence and data stories. You can install them all with the following:</p>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">## Use UNHCR Open data  - https://unhcr.github.io/unhcrdatapackage/docs/</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">'unhcr/unhcrdatapackage’)</span></span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">## API to connect to internal data source - https://unhcr-web.github.io/hcrdata/docs/</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="st">remotes::install_github('</span>unhcr<span class="op">-</span>web<span class="op">/</span>hcrdata’)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">## Perform High Frequency Check https://unhcr.github.io/HighFrequencyChecks/docs/</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">'unhcr/HighFrequencyChecks’)</span></span>
<span id="cb5-9"><a href="#cb5-9"></a></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="st">## Process data crunching for survey dataset - https://unhcr.github.io/koboloadeR/docs/</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="st">remotes::install_github('</span>unhcr<span class="op">/</span>koboloadeR’)</span>
<span id="cb5-12"><a href="#cb5-12"></a></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">## Use UNHCR graphical template- https://unhcr-web.github.io/unhcRstyle/docs/</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">'unhcr-web/unhcRstyle'</span>)</span></code></pre></div>
<div id="building-package-documentation" class="section level4">
<h4 class="hasAnchor">
<a href="#building-package-documentation" class="anchor"></a>Building package documentation</h4>
<p><code><a href="https://devtools.r-lib.org//reference/document.html">devtools::document()</a></code></p>
<p><code><a href="https://devtools.r-lib.org//reference/check.html">devtools::check(document = FALSE)</a></code></p>
<p><code><a href="https://pkgdown.r-lib.org/reference/build_site.html">pkgdown::build_site()</a></code></p>
<hr>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/unhcr/koboloadeR/">https://​github.com/​unhcr/​koboloadeR/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/unhcr/koboloadeR/issues">https://​github.com/​unhcr/​koboloadeR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Edouard Legoupil <br><small class="roles"> Author, maintainer </small>  </li>
<li>Maher Daoud <br><small class="roles"> Author </small>  </li>
<li>Hisham Galal <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0.en.html"><img src="https://img.shields.io/badge/license-GPL--3-blue.svg" alt="license"></a></li>
<li><a href="https://github.com/unhcr/koboloadeR/blob/master/DESCRIPTION"><img src="https://img.shields.io/badge/package%20version-0.0.1-orange.svg" alt="packageversion"></a></li>
<li><a href="https://cran.r-project.org/package=koboloadeR"><img src="https://www.r-pkg.org/badges/version/koboloadeR" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=koboloadeR"><img src="https://img.shields.io/cran/v/koboloadeR.svg" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=koboloadeR"><img src="https://img.shields.io/cran/l/koboloadeR.svg" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=koboloadeR"><img src="http://cranlogs.r-pkg.org/badges/koboloadeR" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=koboloadeR"><img src="http://cranlogs.r-pkg.org/badges/grand-total/koboloadeR" alt="CRAN"></a></li>
<li><a href="https://travis-ci.org/unhcr/koboloadeR"><img src="https://travis-ci.org/unhcr/koboloadeR.svg?branch=gh-pages" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/unhcr/koboloadeR"><img src="https://ci.appveyor.com/api/projects/status/github/unhcr/koboloadeR?branch=gh-pages&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/gh/unhcr/koboloadeR"><img src="https://codecov.io/gh/unhcr/koboloadeR/branch/gh-pages/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://www.codacy.com/app/Edouard-Legoupil/koboloadeR?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=unhcr/koboloadeR&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/2adb516e959b4c1599ca4367b8480196" alt="Codacy Badge"></a></li>
<li><a href="https://github.com/unhcr/koboloadeR/commits/master"><img src="https://img.shields.io/github/last-commit/unhcr/koboloader.svg" alt="Last-changedate"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Edouard Legoupil, Maher Daoud, Hisham Galal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
